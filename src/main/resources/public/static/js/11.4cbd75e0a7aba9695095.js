webpackJsonp([11],{"8Pxq":function(e,t,n){var o=n("x6QT");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("7a57394a",o,!0)},KYsC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),r=n.n(o),a=n("vLgD"),c=n("mw3O"),i=n.n(c);function l(){return Object(a.a)({method:"GET",url:"/project/types"})}var s={props:{dialogTitle:String,isAdd:Boolean},data:function(){return{projectTypes:[],dialogVisible:!1,saveProjectForm:{}}},methods:{saveProject:function(){var e,t=this;this.isAdd?(e=this.saveProjectForm,Object(a.a)({method:"POST",url:"/project/add",data:i.a.stringify(e)})).then(function(e){t.$notify.success(e.msg),t.$emit("saveProjectSuccess"),t.dialogVisible=!1}):function(e){return Object(a.a)({method:"POST",url:"/project/update",data:i.a.stringify(e)})}(this.saveProjectForm).then(function(e){t.$notify.success(e.msg),t.$emit("saveProjectSuccess"),t.dialogVisible=!1})},getProjectTypes:function(){var e=this;l().then(function(t){e.projectTypes=t.data})}},created:function(){this.getProjectTypes()}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,center:"",width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{attrs:{data:e.saveProjectForm,"label-width":"80px"}},[n("el-form-item",{staticClass:"content-center",attrs:{label:"项目名称",rules:[{required:!0}]}},[n("el-input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.saveProjectForm.projectName,callback:function(t){e.$set(e.saveProjectForm,"projectName","string"==typeof t?t.trim():t)},expression:"saveProjectForm.projectName"}})],1),e._v(" "),n("el-form-item",{staticClass:"content-center",attrs:{label:"项目类型",rules:[{required:!0}]}},[n("el-radio-group",{staticStyle:{width:"300px"},model:{value:e.saveProjectForm.projectType,callback:function(t){e.$set(e.saveProjectForm,"projectType",t)},expression:"saveProjectForm.projectType"}},e._l(e.projectTypes,function(t){return n("el-radio",{attrs:{label:t.projectTypeId}},[e._v(e._s(t.projectTypeName))])}))],1),e._v(" "),n("el-form-item",{staticClass:"content-center",attrs:{label:"项目描述"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",clearable:""},model:{value:e.saveProjectForm.description,callback:function(t){e.$set(e.saveProjectForm,"description","string"==typeof t?t.trim():t)},expression:"saveProjectForm.description"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.saveProject}},[e._v("保 存")])],1)],1)},staticRenderFns:[]},u={components:{addOrSaveProjectDialog:n("VU/8")(s,p,!1,null,null,null).exports},data:function(){return{addProjectDialogTitle:"新增项目",updateProjectDialogTitle:"修改项目",projectList:null,pages:null,total:0,queryListForm:{pageIndex:1,countPerPage:10,projectName:null,projectType:null},projectNames:[],projectTypes:[]}},methods:{selectProject:function(e){var t=this;this.$confirm("选择该项目作为你的测试项目（确定后，需要重新登录）？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){localStorage.setItem("projectId",e.projectId),localStorage.setItem("projectName",e.projectName),t.$router.push({path:"/login"})})},makeAddProjectDialogVisible:function(){this.$refs.addProjectDialog.dialogVisible=!0},clearSearch:function(){this.queryListForm={pageIndex:1,countPerPage:10,projectName:null,projectType:null}},getProjectTypes:function(e){var t=this;!0===e&&l().then(function(e){t.projectTypes=e.data})},getProjectNames:function(e){var t=this;!0===e&&Object(a.a)({method:"GET",url:"/project/names"}).then(function(e){t.projectNames=e.data,console.log("所有项目",t.projectNames)})},requestProjectList:function(){var e,t=this;(e=this.queryListForm,Object(a.a)({method:"GET",url:"/project/list",params:e})).then(function(e){t.projectList=e.data.data,t.total=e.data.total,t.pages=e.data.pages})},handleCurrentChange:function(e){console.log("点击页码",e),this.queryListForm.pageIndex=e},deleteProject:function(e){var t=this;this.$confirm("删除该项目？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n;(n=e.projectId,Object(a.a)({method:"GET",url:"/project/delete",params:{projectId:n}})).then(function(e){t.$notify.success(e.msg),t.requestProjectList()})})},makeUpdateProjectDialogVisible:function(e){var t=r()({},e);this.$refs.saveProjectDialog.saveProjectForm=t,this.$refs.saveProjectDialog.dialogVisible=!0}},created:function(){this.requestProjectList()},watch:{queryListForm:{handler:function(){console.log("检测到请求form有变化"),this.requestProjectList()},deep:!0}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",[n("el-button",{attrs:{icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:e.makeAddProjectDialogVisible}},[e._v("新增项目")])],1),e._v(" "),n("div",[n("addOrSaveProjectDialog",{ref:"addProjectDialog",attrs:{dialogTitle:e.addProjectDialogTitle,isAdd:!0},on:{saveProjectSuccess:function(t){e.requestProjectList()}}}),e._v(" "),n("addOrSaveProjectDialog",{ref:"saveProjectDialog",attrs:{dialogTitle:e.updateProjectDialogTitle,isAdd:!1},on:{saveProjectSuccess:function(t){e.requestProjectList()}}})],1),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-select",{attrs:{placeholder:"项目类型"},on:{"visible-change":e.getProjectTypes},model:{value:e.queryListForm.projectType,callback:function(t){e.$set(e.queryListForm,"projectType",t)},expression:"queryListForm.projectType"}},e._l(e.projectTypes,function(t){return n("el-option",{attrs:{label:t.projectTypeName,value:t.projectTypeId}},[1===t.projectTypeId?n("svg-icon",{staticStyle:{"vertical-align":"middle"},attrs:{"icon-class":"android"}}):n("svg-icon",{staticStyle:{"vertical-align":"middle"},attrs:{"icon-class":"ios"}}),e._v(" "),n("span",[e._v(e._s(t.projectTypeName))])],1)})),e._v(" "),n("el-select",{attrs:{clearable:"",placeholder:"项目名",filterable:""},on:{"visible-change":e.getProjectNames},model:{value:e.queryListForm.projectName,callback:function(t){e.$set(e.queryListForm,"projectName",t)},expression:"queryListForm.projectName"}},e._l(e.projectNames,function(e){return n("el-option",{attrs:{value:e}})})),e._v(" "),n("el-button",{on:{click:e.clearSearch}},[e._v("重置")])],1),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("el-table",{attrs:{data:e.projectList,"highlight-current-row":"",border:""}},[n("el-table-column",{attrs:{label:"项目类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[1===e.row.projectType?n("svg-icon",{attrs:{"icon-class":"android"}}):n("svg-icon",{attrs:{"icon-class":"ios"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime"}}),e._v(" "),n("el-table-column",{attrs:{label:"项目名称",align:"center",prop:"projectName"}}),e._v(" "),n("el-table-column",{attrs:{label:"项目描述",align:"center",prop:"description"}}),e._v(" "),n("el-table-column",{attrs:{label:"更新时间",align:"center",prop:"updateTime"}}),e._v(" "),n("el-table-column",{attrs:{label:"创建人",align:"center",prop:"creatorNickname"}}),e._v(" "),n("el-table-column",{attrs:{label:"更新人",align:"center",prop:"updatorNickname"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small",type:"success"},on:{click:function(n){e.selectProject(t.row)}}},[e._v("选择")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){e.makeUpdateProjectDialogVisible(t.row)}}},[e._v("修改")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.deleteProject(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),e.total>e.queryListForm.countPerPage?n("div",{staticStyle:{"margin-top":"10px"},attrs:{align:"center"}},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.queryListForm.pageIndex,total:10*e.pages},on:{"current-change":e.handleCurrentChange}})],1):e._e()])},staticRenderFns:[]};var m=n("VU/8")(u,d,!1,function(e){n("8Pxq")},"data-v-0f95798b",null);t.default=m.exports},x6QT:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});