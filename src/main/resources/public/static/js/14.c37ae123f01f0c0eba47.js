webpackJsonp([14],{"+PJL":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Ey00"),n=a("vMJZ"),s=localStorage.getItem("projectId")?parseInt(localStorage.getItem("projectId")):null,l={data:function(){return{queryListForm:{pageIndex:1,countPerPage:10,projectId:s},pages:null,total:0,testTaskList:[],userList:[]}},computed:{runMode:function(){return function(t){return 1==t.runMode?"兼容模式":2==t.runMode?"高效模式":"-"}},statusTagType:function(){return function(t){return 0===t.status?"danger":1===t.status?"success":void 0}},statusText:function(){return function(t){return 0===t.status?'<i class="el-icon-loading"></i>执行中':1===t.status?"执行完成":"未知"}}},methods:{selectCommitter:function(t){var e=this;t&&Object(n.b)().then(function(t){e.userList=t.data})},query:function(){this.queryListForm.pageIndex=1,this.requestQueryList()},goToReportPage:function(t){this.$router.push({name:"Report",params:{testTaskId:t.testTaskId}})},requestQueryList:function(){var t=this;Object(r.b)(this.queryListForm).then(function(e){t.testTaskList=e.data.data,t.total=e.data.total,t.pages=e.data.pages})},handleCurrentChange:function(t){console.log("点击页码",t),this.queryListForm.pageIndex=t,this.requestQueryList()}},created:function(){this.requestQueryList()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",[a("el-select",{attrs:{placeholder:"执行状态",clearable:""},model:{value:t.queryListForm.status,callback:function(e){t.$set(t.queryListForm,"status",e)},expression:"queryListForm.status"}},[a("el-option",{attrs:{label:"执行中",value:0}}),t._v(" "),a("el-option",{attrs:{label:"执行完成",value:1}})],1),t._v(" "),a("el-select",{attrs:{placeholder:"提交人",clearable:""},on:{"visible-change":t.selectCommitter},model:{value:t.queryListForm.creatorUid,callback:function(e){t.$set(t.queryListForm,"creatorUid",e)},expression:"queryListForm.creatorUid"}},t._l(t.userList,function(t){return a("el-option",{attrs:{label:t.nickname,value:t.userId}})})),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{attrs:{data:t.testTaskList,border:""}},[a("el-table-column",{attrs:{label:"开始时间",prop:"startTime",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"结束时间",prop:"endTime",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"测试任务",prop:"testTaskName",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"任务描述",prop:"description",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"测试计划",prop:"testPlanName",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"用例分发策略",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.runMode(e.row))+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"执行状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.statusTagType(e.row)},domProps:{innerHTML:t._s(t.statusText(e.row))}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"提交人",prop:"creatorName",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"测试报告",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("div",[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){t.goToReportPage(e.row)}}},[t._v("查看")])],1):t._e()]}}])})],1)],1),t._v(" "),t.total>t.queryListForm.countPerPage?a("div",{staticStyle:{"margin-top":"10px"},attrs:{align:"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.queryListForm.pageIndex,total:10*t.pages},on:{"current-change":t.handleCurrentChange}})],1):t._e()])},staticRenderFns:[]},u=a("VU/8")(l,o,!1,null,null,null);e.default=u.exports},Ey00:function(t,e,a){"use strict";e.a=function(t){return Object(r.a)({method:"POST",url:"/testTask/commit",data:t})},e.b=function(t){return Object(r.a)({method:"POST",url:"/testTask/list",data:t})};var r=a("vLgD")}});